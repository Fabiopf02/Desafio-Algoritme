(this.webpackJsonpdesafio=this.webpackJsonpdesafio||[]).push([[0],{36:function(e,t,r){},46:function(e,t,r){},48:function(e,t,r){},58:function(e,t,r){},62:function(e,t,r){},63:function(e,t,r){},64:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},75:function(e,t,r){"use strict";r.r(t);var n=r(6),a=r.n(n),c=r(49),s=r.n(c),u=(r(58),r(0)),i=r.n(u),o=r(1),l=r(11),d=r(19),b=Object(d.a)(),j=r(50),p=r(33),O=r(43),f={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_DATABASE,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_APP_ID},h=Object(j.a)(f);function v(e,t){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function e(t,r){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.signInWithEmailAndPassword(O.getAuth(),t,r);case 3:return n=e.sent,a=n.user,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(String(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getAuth().signOut();case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function E(e,t,r){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(i.a.mark((function e(t,r,n){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.createUserWithEmailAndPassword(O.getAuth(),t,r);case 3:return a=e.sent,c=a.user,e.next=7,O.updateProfile(c,{displayName:n});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Error(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}O.getAuth(h),p.getFirestore(h);var _=r(4),w=Object(n.createContext)({}),C=function(e){var t=e.children,r=Object(n.useState)(null),a=Object(l.a)(r,2),c=a[0],s=a[1],u=Object(n.useState)(!0),d=Object(l.a)(u,2),j=d[0],p=d[1];Object(n.useEffect)((function(){var e=localStorage.getItem("@user"),t=b.location.pathname;if(!e)return b.push("/dashboard"!==t?t:"/login"),p(!1);s(JSON.parse(e)),p(!1),b.push("/dashboard")}),[]);var O=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t,r);case 3:n=e.sent,a=n.displayName,c=n.uid,b.push("/dashboard"),s({name:a,id:c,email:t}),localStorage.setItem("@user",JSON.stringify({name:a,id:c,email:t})),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),new Error(String(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),[]),f=Object(n.useCallback)(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:b.push("/login"),s(null),localStorage.removeItem("@user");case 5:case"end":return e.stop()}}),e)}))),[]);return Object(_.jsx)(w.Provider,{value:{signed:Boolean(c),loading:j,user:c,signIn:O,signOut:f},children:t})},A=r(14),D=r(21),T=(r(62),function(e){var t=e.prop,r=e.value;return Object(_.jsxs)("div",{className:"block",children:[Object(_.jsx)("h4",{className:"p",children:t}),Object(_.jsx)("p",{className:"boolean"===typeof r?r?"v gr":"v r":"v",children:"boolean"===typeof r?r?"Ativo":"Inativo":String(r)})]})}),R=Object(n.memo)(T),k=r(24),N=r(26);function y(e){var t=new Date(1e3*e.seconds).toISOString().split("T")[0].split("/");return new Date("".concat(t[1],"/").concat(t[2],"/").concat(t[0]))}function P(e){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.a)(Object(N.b)(p.getFirestore(),"clients"),t);case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(String(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(e){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(i.a.mark((function e(t){var r,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(N.f)(Object(N.b)(p.getFirestore(),"clients"),Object(N.h)("ownerId","==",t)),e.next=4,Object(N.e)(r);case 4:return n=e.sent,a=n.docs,c=a.map((function(e){var t=e.data(),r=y(t.birthDate),n=y(t.createdAt);return Object(k.a)(Object(k.a)({},t),{},{birthDate:r,createdAt:n,doc:e.ref})})),e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(String(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function H(e){return K.apply(this,arguments)}function K(){return(K=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.g)(t.doc,Object(k.a)({},t));case 3:return e.abrupt("return",t.doc);case 6:throw e.prev=6,e.t0=e.catch(0),new Error(String(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function W(e){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.d)(t);case 3:return r=e.sent,n=r.data(),e.abrupt("return",{doc:n.doc,id:n.id,name:n.name,phone:n.phone,status:n.status,ownerId:n.ownerId,income:n.income,createdAt:y(n.createdAt),birthDate:y(n.birthDate)});case 8:throw e.prev=8,e.t0=e.catch(0),new Error(String(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return(V=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(N.c)(t);case 3:return e.abrupt("return");case 6:throw e.prev=6,e.t0=e.catch(0),new Error(String(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var z=r(45),M=r(51),J=["id"],$=["id"],G=r.n(M)()(Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIASEARCH_APPID,Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIASEARCH_APIKEY).initIndex(Object({NODE_ENV:"production",PUBLIC_URL:"/desafio/react-test-gh-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIASEARCH_INDEX);function Y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(o.a)(i.a.mark((function e(t,r){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.search(r+" "+t);case 2:return n=e.sent,a=n.hits,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return X.apply(this,arguments)}function X(){return(X=Object(o.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.id,n=Object(z.a)(t,J),e.next=4,G.saveObject({objectID:r,name:n.name,status:n.status,statusText:n.status?"ativo":"inativo",phone:n.phone,income:n.income,ownerId:n.ownerId,birthDate:n.birthDate,createdAt:n.createdAt});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Algolia -> ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(o.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.id,n=Object(z.a)(t,$),e.next=4,G.partialUpdateObject({objectID:r,name:n.name,status:n.status,statusText:n.status?"ativo":"inativo",phone:n.phone,income:n.income,ownerId:n.ownerId,birthDate:n.birthDate,createdAt:n.createdAt});case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error(String(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return(re=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.deleteObject(String(t));case 3:return e.abrupt("return");case 6:throw e.prev=6,e.t0=e.catch(0),new Error(String(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var ne=Object(n.createContext)({}),ae=function(e){var t=e.children,r=Object(n.useState)(!1),a=Object(l.a)(r,2),c=a[0],s=a[1],u=Object(n.useState)(),d=Object(l.a)(u,2),b=d[0],j=d[1],p=Object(n.useState)(),O=Object(l.a)(p,2),f=O[0],h=O[1];function v(e,t){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W(t);case 4:if(n=e.sent,"created"!==r){e.next=10;break}return e.next=8,q(n);case 8:e.next=12;break;case 10:return e.next=12,Q(n);case 12:j(n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t);case 3:return r=e.sent,e.next=6,q(t);case 6:v(r,"created"),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Error(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),S=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,L(t);case 4:return r=e.sent,s(!1),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(0),s(!1),new Error(String(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),E=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t);case 3:v(e.sent,"updated"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(String(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]),g=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,Y(t,r);case 4:return n=e.sent,s(!1),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),s(!1),new Error(String(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),[]),w=Object(n.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t.doc);case 3:return e.next=5,te(t.id);case 5:return e.abrupt("return",h(t.id));case 8:throw e.prev=8,e.t0=e.catch(0),new Error(String(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(_.jsx)(ne.Provider,{value:{loading:c,doc:b,removed:f,removeClientFC:w,searchClient:g,createClient:m,getClients:S,updateClient:E},children:t})},ce=r(27);var se=function(e){var t,r=e.data,a=e.setClient,c=Object(n.useContext)(ne).removeClientFC,s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],b=u[1],j=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(r);case 3:return e.abrupt("return",alert("O cliente foi removido"));case 6:e.prev=6,e.t0=e.catch(0),alert("Ocorreu um error, tente novamente");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return",b(!0));case 2:return e.next=4,j();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:"client-container",children:[Object(_.jsxs)("div",{className:"data",children:[Object(_.jsx)(R,{prop:"ID",value:r.id}),Object(_.jsx)(R,{prop:"Nome",value:r.name}),Object(_.jsx)(R,{prop:"Telefone",value:(t=r.phone,(t=String(t)).replace(/(\d{2})(\d{1})(\d{4})(\d{4})$/,"($1) $2 $3-$4"))}),Object(_.jsx)(R,{prop:"Data de nasc.",value:r.birthDate.toLocaleDateString()}),Object(_.jsx)(R,{prop:"Renda",value:"R$ "+Number(r.income.toFixed(2)).toLocaleString()}),Object(_.jsx)(R,{prop:"Status",value:r.status})]}),Object(_.jsxs)("div",{className:"options",children:[Object(_.jsxs)("button",{className:"del",onClick:p,children:[Object(_.jsx)("strong",{children:d?"Confirmar":"Remover"}),!1===d&&Object(_.jsx)(ce.f,{width:20})]}),Object(_.jsxs)("button",{onClick:function(){a({data:r,key:Math.random()})},children:[Object(_.jsx)("strong",{children:"Editar"}),Object(_.jsx)(ce.c,{width:20})]})]})]})},ue=Object(n.memo)(se),ie=(r(63),r.p+"static/media/loading.2e4773db.gif"),oe=function(){return Object(_.jsxs)("div",{className:"loading-container",children:[Object(_.jsx)("img",{src:ie,width:100,alt:"loading..."}),Object(_.jsx)("h3",{children:"Carregando..."})]})};function le(e,t,r){if(!t||t===[])return t;var n=t.sort((function(t,r){var n=t[e],a=r[e];return"string"===typeof n&&(n="".concat(n).toUpperCase(),a="".concat(a).toUpperCase()),n>a?1:n<a?-1:0}));return"desc"===r?n:"asc"===r?n.reverse():t}var de=Object(n.createContext)({}),be=function(e){var t=e.children,r=Object(n.useState)(""),a=Object(l.a)(r,2),c=a[0],s=a[1],u=Object(n.useState)({field:"income",type:"desc"}),i=Object(l.a)(u,2),o=i[0],d=i[1],b=Object(n.useCallback)((function(e){s(e)}),[]),j=Object(n.useCallback)((function(e){d(e)}),[]);return Object(_.jsx)(de.Provider,{value:{search:c,order:o,setSearchFC:b,changeOrder:j},children:t})},je=function(e){var t=e.setClient,r=Object(n.useState)(),a=Object(l.a)(r,2),c=a[0],s=a[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),b=d[0],j=d[1],p=Object(n.useContext)(w).user,O=Object(n.useContext)(ne),f=O.getClients,h=O.doc,v=O.loading,x=O.searchClient,m=O.removed,S=Object(n.useContext)(de),E=S.search,g=S.order,C=Object(n.useState)(E),A=Object(l.a)(C,2),T=A[0],R=A[1];return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!1),e.next=3,f(p.id);case 3:return t=e.sent,e.abrupt("return",s(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f,p,b]),Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:s((function(e){return[h].concat(Object(D.a)(e.filter((function(e){return e.id!==(null===h||void 0===h?void 0:h.id)}))))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[h]),Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&E!==T){e.next=2;break}return e.abrupt("return");case 2:return R(E),e.next=5,x(E,null===p||void 0===p?void 0:p.id);case 5:t=e.sent,r=t.map((function(e){return{id:Number(e.objectID),name:e.name,status:e.status,phone:e.phone,income:e.income,ownerId:e.ownerId,birthDate:new Date(e.birthDate),createdAt:new Date(e.createdAt)}})),s(le(g.field,r,g.type));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[T,g,E,x,null===p||void 0===p?void 0:p.id]),Object(n.useEffect)((function(){c&&s(le(g.field,c,g.type))}),[c,g]),Object(n.useEffect)((function(){s((function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==m}))}))}),[m]),v?Object(_.jsx)(oe,{}):Object(_.jsxs)("div",{className:"content-container",children:[Object(_.jsx)("h1",{className:"title",children:"Lista de correntistas"}),void 0!==c&&c.length>0&&c.map((function(e){return Object(_.jsx)(ue,{data:e,setClient:t},e.id)})),(!c||0===c.length)&&!v&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h2",{className:"msg",children:"Nenhum cliente foi encontrado!"}),Object(_.jsx)("button",{onClick:function(){return j(!0)},className:"reload-btn",children:"Recarregar"})]})]})},pe=(r(64),function(){var e=Object(n.useContext)(w).user;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("header",{className:"header",children:[Object(_.jsxs)("div",{className:"brand",children:["<","Brand"," />"]}),Object(_.jsxs)("div",{className:"texts",children:[Object(_.jsx)("h1",{children:"Painel de controle"}),Object(_.jsxs)("h3",{children:["Bem-vindo de volta,"," ",Object(_.jsx)("span",{className:"username",children:e.name}),"!"]})]})]})})}),Oe=(r(65),function(e,t){var r,a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=c[0],u=c[1];return Object(_.jsxs)("div",{className:"block-input",children:[void 0!==e.text&&Object(_.jsx)("label",{children:e.text}),Object(_.jsx)("input",Object(k.a)(Object(k.a)({ref:t},e),{},{className:s?"error":"",type:e.type,minLength:"password"===e.type?6:void 0,step:"number"===e.type?null!==(r=e.step)&&void 0!==r?r:"1":"",onBlur:function(t){var r=t.currentTarget.value;return r&&("email"!==e.type||r.match(/^[a-zA-Z0-9]+@+[a-zA-Z0-9]+.+[A-z]/))?void u(!1):u(!0)},autoComplete:"password"===e.type?"off":"on"}))]})}),fe=a.a.forwardRef(Oe),he=(r(66),function(e){var t=e.text,r=e.disabled;return Object(_.jsx)("button",{type:"submit",disabled:r,className:"submit-button",children:Object(_.jsx)("strong",{children:t})})}),ve=(r(67),function(e){var t=e.error;return Object(_.jsx)("div",{className:"error-container",children:Object(_.jsx)("p",{children:t})})}),xe=(r(36),r(68),function(e){var t=e.children,r=e.onSubmit;return Object(_.jsx)("div",{className:"form-container",children:Object(_.jsx)("form",{className:"form",onSubmit:r,children:t})})}),me=function(e,t){var r=e.data,a=Object(n.useRef)(null),c=Object(n.useRef)(null),s=Object(n.useRef)(null),u=Object(n.useRef)(null),d=Object(n.useRef)(null),b=Object(n.useState)(!1),j=Object(l.a)(b,2),p=j[0],O=j[1],f=Object(n.useRef)(null),h=Object(n.useContext)(w).user,v=Object(n.useContext)(ne),x=v.updateClient,m=v.createClient,S=Object(n.useState)(""),E=Object(l.a)(S,2),g=E[0],C=E[1];Object(n.useEffect)((function(){(null===r||void 0===r?void 0:r.name)&&a.current&&(a.current.value=r.name,c.current.value=String(r.phone),s.current.value=r.birthDate.toISOString().split("T")[0],u.current.value=String(r.income),d.current.checked=r.status)}),[r]);var A=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,o,l,b,j,f,v,S,E,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!p){e.next=4;break}return e.abrupt("return");case 4:if(O(!0),j=null===(n=a.current)||void 0===n?void 0:n.value,f=null===(o=c.current)||void 0===o?void 0:o.value,v=null===(l=s.current)||void 0===l?void 0:l.value,S=null===(b=u.current)||void 0===b?void 0:b.value,j&&f&&v&&S){e.next=11;break}return e.abrupt("return",C("Preencha todos os campos!"));case 11:if(!(f.length<11)){e.next=13;break}return e.abrupt("return",C("O n\xfamero de telefone deve ter pelo menos 11 d\xedgitos. (DDD + telefone)"));case 13:if(!(f.length>11)){e.next=15;break}return e.abrupt("return",C("O n\xfamero de telefone deve ter no m\xe1ximo 11 d\xedgitos. (DDD + telefone)"));case 15:if(C(""),E={name:j,phone:Number(f),birthDate:new Date(v),income:Number(S),status:d.current.checked},!r||!r.id){e.next=22;break}return e.next=20,x(Object(k.a)(Object(k.a)({},E),{},{doc:r.doc,id:r.id}));case 20:e.next=25;break;case 22:return g=Number(Math.random().toString(10).substr(2,10)),e.next=25,m(Object(k.a)(Object(k.a)({},E),{},{id:g,createdAt:new Date,ownerId:h.id}));case 25:O(!1),R(),T(),e.next=34;break;case 30:return e.prev=30,e.t0=e.catch(0),O(!1),e.abrupt("return",C(String(e.t0)));case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t){return e.apply(this,arguments)}}(),D=Object(n.useCallback)((function(){var e;null===(e=f.current)||void 0===e||e.classList.add("show")}),[]),T=Object(n.useCallback)((function(){var e,t,r;R(),C(""),null===(e=f.current)||void 0===e||e.classList.remove("show"),null===(t=f.current)||void 0===t||t.classList.add("hide"),null===(r=f.current)||void 0===r||r.addEventListener("animationend",(function(){var e;null===(e=f.current)||void 0===e||e.classList.remove("hide")}))}),[]);Object(n.useImperativeHandle)(t,(function(){return{openModal:D}}));var R=function(){a.current.value="",c.current.value="",s.current.value="",u.current.value="",d.current.value=""};return Object(_.jsx)("div",{ref:f,className:"modal",children:Object(_.jsxs)(xe,{onSubmit:A,children:[Object(_.jsx)("h2",{children:r&&r.id?"Atualizar cliente":"Novo cliente"}),Object(_.jsx)(fe,{ref:a,text:"Nome",type:"text"}),Object(_.jsx)(fe,{ref:c,text:"Telefone",placeholder:"DDD + n\xfamero",type:"number",maxLength:11}),Object(_.jsx)(fe,{ref:s,text:"Data de nascimento",type:"date"}),Object(_.jsx)(fe,{ref:u,text:"Renda",step:"any",type:"number"}),Object(_.jsxs)("label",{className:"lb-checkbox",children:["Status",Object(_.jsx)("input",{ref:d,type:"checkbox",className:"checkbox"})]}),Object(_.jsx)(he,{disabled:p,text:r&&r.id?p?"Atualizando...":"Atualizar":p?"Salvando...":"Inserir"}),""!==g&&Object(_.jsx)(ve,{error:g}),Object(_.jsx)("div",{className:"center",children:Object(_.jsx)("button",{className:"cancel",type:"button",onClick:T,children:"Cancelar"})})]})})},Se=a.a.forwardRef(me),Ee=(r(69),r(46),function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(de).setSearchFC,r=Object(n.useState)(!1),a=Object(l.a)(r,2),c=a[0],s=a[1];return Object(_.jsx)("div",{className:"item",children:Object(_.jsx)("form",{onSubmit:function(r){var n;if(r.preventDefault(),!c){s(!0);var a=null===(n=e.current)||void 0===n?void 0:n.value;if(null===a||void 0===a?void 0:a.length)return t(a),s(!1)}},children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("span",{className:"material-icons-outlined"}),Object(_.jsx)(fe,{className:"inp",ref:e,placeholder:"Buscar por nome, telefone...",type:"search"}),Object(_.jsx)("button",{children:Object(_.jsx)(ce.e,{size:18})})]})})})}),ge=function(){var e=Object(n.useContext)(de).changeOrder,t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=function(){if(t.current&&r.current){var n=t.current.value,a=r.current.value;return e({field:n,type:"asc"===a?"asc":"desc"})}};return Object(_.jsxs)("div",{children:[Object(_.jsxs)("select",{ref:t,defaultValue:"income",onChange:a,children:[Object(_.jsx)("option",{value:"name",children:"Nome"}),Object(_.jsx)("option",{value:"income",children:"Renda"}),Object(_.jsx)("option",{value:"birthDate",children:"Data de nascimento"}),Object(_.jsx)("option",{value:"status",children:"Status"})]}),Object(_.jsxs)("select",{ref:r,defaultValue:"desc",onChange:a,children:[Object(_.jsx)("option",{value:"asc",children:"Ascendente"}),Object(_.jsx)("option",{value:"desc",children:"Decrescente"})]})]})},_e=function(e){var t=e.fct,r=Object(n.useContext)(w).signOut,a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=c[0],u=c[1],d=Object(n.useRef)(null),b=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{ref:d,className:"side-bar",children:[Object(_.jsxs)("div",{className:"brand",children:["<","Brand"," />"]}),Object(_.jsxs)("ul",{children:[Object(_.jsxs)("li",{children:[Object(_.jsx)("span",{children:Object(_.jsx)("h4",{children:"Buscar"})}),Object(_.jsx)(Ee,{})]}),Object(_.jsxs)("li",{children:[Object(_.jsx)("span",{children:Object(_.jsx)("h4",{children:"Ordenar por"})}),Object(_.jsx)(ge,{})]})]}),Object(_.jsx)("button",{onClick:t,children:Object(_.jsx)("strong",{children:"Novo cliente"})}),Object(_.jsxs)("button",{className:"logout",onClick:b,children:[Object(_.jsx)("span",{children:"Sair"}),Object(_.jsx)(ce.d,{size:18})]}),Object(_.jsx)("button",{className:"btn-toggle",onClick:function(){var e;d.current.classList.toggle("an"),(null===(e=d.current)||void 0===e?void 0:e.classList.value.includes("an"))?u(!0):u(!1)},children:Object(_.jsx)("span",{children:!0===s?Object(_.jsx)(ce.a,{className:"chevron-l",size:20}):Object(_.jsx)(ce.b,{className:"chevron-r",size:20})})})]})},we=(r(70),function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),r=t[0],a=t[1],c=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e;r&&r.data&&(null===(e=c.current)||void 0===e||e.openModal())}),[r]),Object(_.jsxs)(ae,{children:[Object(_.jsxs)("div",{className:"dashboard",children:[Object(_.jsx)(pe,{}),Object(_.jsx)("div",{className:"content",children:Object(_.jsxs)(be,{children:[Object(_.jsx)(_e,{fct:function(){var e;a({}),null===(e=c.current)||void 0===e||e.openModal()}}),Object(_.jsx)(je,{setClient:a})]})})]}),Object(_.jsx)(Se,{ref:c,data:r.data})]})}),Ce=r(28),Ae=function(){return Object(_.jsx)(Ce.a,{children:Object(_.jsxs)(A.d,{children:[Object(_.jsx)(A.b,{path:"/dashboard",exact:!0,component:we}),Object(_.jsx)(A.a,{from:"*",to:"/dashboard"})]})})},De=(r(48),function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),r=Object(n.useState)(""),a=Object(l.a)(r,2),c=a[0],s=a[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),b=d[0],j=d[1],p=Object(n.useContext)(w).signIn,O=function(){var r=Object(o.a)(i.a.mark((function r(n){var a,c,u,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),!b){r.next=3;break}return r.abrupt("return");case 3:if(j(!0),u=null===(a=e.current)||void 0===a?void 0:a.value,o=null===(c=t.current)||void 0===c?void 0:c.value,r.prev=6,u&&o){r.next=10;break}return j(!1),r.abrupt("return",s("Preencha todos os campos!"));case 10:return s(""),r.next=13,p(u,o);case 13:return j(!1),r.abrupt("return");case 17:if(r.prev=17,r.t0=r.catch(6),j(!1),!(String(r.t0).indexOf("user-not-found")>0)){r.next=22;break}return r.abrupt("return",s("Usu\xe1rio n\xe3o encontrado"));case 22:if(!(String(r.t0).indexOf("wrong-password")>0)){r.next=24;break}return r.abrupt("return",s("Senha incorreta!"));case 24:s("Ocorreu um erro, tente novamente");case 25:case"end":return r.stop()}}),r,null,[[6,17]])})));return function(e){return r.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)(xe,{onSubmit:O,children:[Object(_.jsx)("h2",{children:"Boas-vindas!"}),Object(_.jsx)(fe,{ref:e,text:"E-mail",type:"email"}),Object(_.jsx)(fe,{ref:t,text:"Senha",type:"password"}),Object(_.jsx)(he,{disabled:b,text:b?"Autenticando...":"Entrar"}),Object(_.jsxs)("span",{children:["N\xe3o possui uma conta?",Object(_.jsx)(Ce.b,{to:"register",className:"link",children:Object(_.jsx)("span",{children:" Registre-se"})})]}),""!==c&&Object(_.jsx)(ve,{error:c})]})})}),Te=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],u=c[1],d=Object(n.useState)(!1),b=Object(l.a)(d,2),j=b[0],p=b[1],O=Object(A.g)(),f=function(){var n=Object(o.a)(i.a.mark((function n(a){var c,s,o,l,d,b;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!j){n.next=3;break}return n.abrupt("return");case 3:if(p(!0),l=null===(c=e.current)||void 0===c?void 0:c.value,d=null===(s=t.current)||void 0===s?void 0:s.value,b=null===(o=r.current)||void 0===o?void 0:o.value,n.prev=7,d&&b){n.next=10;break}return n.abrupt("return",p(!1));case 10:return n.next=12,E(d,b,l);case 12:p(!1),alert("O usu\xe1rio foi registrado, acesse a p\xe1gina de login"),O.push("/login"),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(7),p(!1),!(String(n.t0).indexOf("email-already-in-use")>0)){n.next=22;break}return n.abrupt("return",u("O E-mail j\xe1 est\xe1 cadastrado"));case 22:u("Ocorreu um erro, tente novamente");case 23:case"end":return n.stop()}}),n,null,[[7,17]])})));return function(e){return n.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)(xe,{onSubmit:f,children:[Object(_.jsx)("h2",{children:"Criar conta"}),Object(_.jsx)(fe,{ref:e,text:"Nome",type:"text"}),Object(_.jsx)(fe,{ref:t,text:"E-mail",type:"email"}),Object(_.jsx)(fe,{ref:r,text:"Senha",type:"password"}),Object(_.jsx)(he,{disabled:j,text:j?"Cadastrando...":"Cadastrar"}),Object(_.jsxs)("span",{children:["J\xe1 possui uma conta?",Object(_.jsx)(Ce.b,{to:"login",className:"link",children:Object(_.jsx)("span",{children:" Acesse aqui"})})]}),""!==s&&Object(_.jsx)(ve,{error:s})]})})},Re=function(){return Object(_.jsx)(Ce.a,{children:Object(_.jsxs)(A.d,{children:[Object(_.jsx)(A.b,{path:"/login",component:De}),Object(_.jsx)(A.b,{path:"/register",component:Te}),Object(_.jsx)(A.a,{from:"*",to:"/login"})]})})},ke=function(){var e=Object(n.useContext)(w),t=e.signed;return e.loading?Object(_.jsx)(a.a.Fragment,{}):t?Object(_.jsx)(Ae,{}):Object(_.jsx)(Re,{})},Ne=function(){return Object(_.jsx)(C,{children:Object(_.jsx)(A.c,{history:b,children:Object(_.jsx)(ke,{})})})};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(Ne,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.8ec463b1.chunk.js.map